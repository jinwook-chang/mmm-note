
### 7. 모델 보정 (Calibration)

#### **1. 보정의 필요성 및 원리**

* **MMM의 한계:** 전통적인 마케팅 믹스 모델링(MMM)은 주로 과거 데이터의 상관관계를 기반으로 마케팅 채널의 효과를 추정합니다. 하지만 상관관계가 항상 인과관계를 의미하지는 않습니다. 예를 들어, 특정 채널의 광고 지출과 매출이 함께 증가했더라도, 그것이 순수하게 해당 광고 때문인지, 아니면 다른 외부 요인(예: 경쟁사의 갑작스러운 활동 중단) 때문인지 명확히 구분하기 어려울 수 있습니다.

* **실험의 중요성:** 인과관계를 보다 명확히 파악하기 위한 좋은 방법 중 하나는 통제된 실험(예: A/B 테스트, 증분 효과 테스트(Lift Test), 지역 기반 테스트(Geo-lift Test))을 수행하는 것입니다. 이러한 실험은 특정 마케팅 활동이 실제로 얼마나 순수한 증분 효과(Incremental Lift)를 가져왔는지 측정할 수 있게 해줍니다.

* **보정(Calibration)의 역할:** 모델 보정은 바로 이 실험 결과를 MMM 모델에 통합하는 과정입니다. 즉, 실험을 통해 얻은 "진실에 가까운(ground truth)" 특정 채널의 효과 정보를 모델링 과정에 반영하여, MMM 모델이 단순한 상관관계를 넘어 실제 인과관계에 더 근접한 결과를 도출하도록 유도하는 것입니다. 이를 통해 모델의 예측 정확도와 신뢰도를 높일 수 있습니다.

#### **2. Robyn에서의 보정 방법**

Robyn은 사용자가 직접 수행한 증분 효과 테스트(Lift Test) 결과를 모델링 과정에 통합할 수 있는 기능을 제공합니다.

* **입력 데이터 준비:**
    보정을 위해서는 다음과 같은 정보를 담은 CSV 파일 또는 데이터 프레임을 준비해야 합니다.
    * `channel`: 보정할 마케팅 채널의 이름 (Robyn 모델에 사용된 채널 이름과 동일해야 함)
    * `liftStartDate`: 실험(또는 캠페인) 시작일 (YYYY-MM-DD 형식)
    * `liftEndDate`: 실험(또는 캠페인) 종료일 (YYYY-MM-DD 형식)
    * `liftAbs`: 해당 기간 동안 해당 채널로 인해 발생한 절대적인 증분 효과 값 (예: 증분 매출액, 증분 판매량). 이 값은 종속 변수와 동일한 단위여야 합니다.
    * `spend`: 해당 기간 동안 해당 채널에 지출된 총 광고 비용 (선택 사항, ROI 계산 등에 활용)
    * `confidence`: 해당 lift 값에 대한 신뢰 수준 (예: 0.8, 0.9 - 선택 사항)
    * `metric`: lift 값의 측정 기준 (예: 'revenue', 'conversions' - 선택 사항)

* **`robyn_inputs()` 함수에 전달:**
    준비된 보정 데이터는 `robyn_inputs()` 함수의 `calibration_input` 인자를 통해 Robyn에 전달됩니다.

* **모델링 과정에서의 활용:**
    Robyn은 보정 데이터를 모델 최적화 과정에서 일종의 "소프트 제약(soft constraint)" 또는 추가적인 목표로 활용합니다. `Nevergrad`를 통한 하이퍼파라미터 최적화 시, 모델이 예측하는 해당 채널/기간의 효과가 사용자가 제공한 `liftAbs` 값과 최대한 유사해지도록 하는 모델들을 우선적으로 탐색합니다.
    * 모델의 오차(NRMSE 또는 DECOMP.RSSD)와 함께, **모델 예측치와 실제 실험값 간의 차이**도 최소화하려는 노력을 합니다.
    * Pareto Front 선택 시, 이러한 보정 결과를 잘 반영하는 모델들이 더 좋은 평가를 받을 수 있습니다.

* **결과 확인:**
    모델 결과의 One-pager 등에서 보정된 채널의 효과가 어떻게 나타나는지, 보정 전과 비교하여 어떤 차이가 있는지 등을 확인할 수 있습니다.

**보정의 장점:**

* **모델의 정확성 향상:** 실제 실험 결과를 반영하여 시장의 현실에 더 가까운 모델을 만들 수 있습니다.
* **인과관계 추론 강화:** 단순 상관관계를 넘어 마케팅 활동의 실제 인과적 효과를 더 잘 반영합니다.
* **이해관계자 설득 용이:** 실제 실험 데이터로 뒷받침되므로 모델 결과에 대한 신뢰도를 높여 의사결정을 설득하는 데 유리합니다.

하지만, 보정에 사용되는 실험 결과 자체의 품질이 매우 중요합니다. 잘못 설계되거나 편향된 실험 결과는 오히려 모델을 왜곡시킬 수 있으므로 주의해야 합니다.

---
